apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: storage

resources:
- namespace.yaml
- minio
- postgres
- bucket-object-cleaner
- docker-registry
- elasticsearch

configMapGenerator:
- name: docker-registry
  files:
  - config/docker-registry/garbage-collector.yaml
- name: elasticsearch
  files:
  - config/elasticsearch/elasticsearch.yml

secretGenerator:
- name: minio
  envs:
  - secrets/minio
- name: postgres
  envs:
  - secrets/postgres
- name: registry
  type: kubernetes.io/dockerconfigjson
  files:
  - .dockerconfigjson=secrets/registry
- name: docker-registry
  envs:
  - secrets/docker-registry/env
  files:
  - secrets/docker-registry/htpasswd
